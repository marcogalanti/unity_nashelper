# unity_nashelper
# Helper tool for performing different file storage related functions in Unity XT systems 

The main function for which reason this program was created is the NAS storage disaster recovery automation of Unity systems using Proxy NAS server feature. During replication NAS servers and relative filesystems it's possible to test access to the secondary copy using a feature to access data in the secondary copy of the replica, without stopping replication flow: this is almost always a requirement for those storage systems serving in mission critical environments.

To setup such a use case it is necessary to implement a set of command that can consume an import amount of time and effort as number of NAS servers, file systems and share increases.

Unity nas helper is useful to automate the task of creating Proxy NAS server and copy all the shares from the replicates file system after creating or reusing existing snapshot of replicated file systems.
This helper also makes easy to list items such as NAS servers, filesystems, shares and snapshots.
_unity_nashelper_ allows storage admin to create snapshots of filesystems.

![](data:image/jpeg;base64,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)

# Setup

In order to run python scripts in _Unity_ console service account logged in have to perform the following steps:

- disable restricted shell via uemcli (by default is enabled)
 
 _uemcli -silent /sys/security set -restrictedShellEnabled no_
 
after issuing this command users have to re-login to the service console start using the unrestricted shell.

- cache admin credential so that password is not requested during step execution for tasks automation.

_uemcli -u admin -securePassword -saveUser_

Once these preparation steps are completed it's possible to run the script:

# Usage


    to automate creation of Unity XT NAS disaster recovery testing env:
    ./unity_nashelper.py --testDR -nas NASserverName

    to show Proxy NAS share(s) info:
    ./unity_nashelper.py --showPROXYSHARE NASserverName

    to show Proxy NAS info:
    ./unity_nashelper.py --showPROXY NASserverName

    to create a filesystem snapshot:
    ./unity_nashelper.py --snap Filesystem <snap name>

    to show NAS server(s) info:
    ./unity_nashelper.py --showNAS NASserverName

    to show file system(s) info:
    ./unity_nashelper.py --showFS <filesystem name>

    to show snapshot(s) info:
    ./unity_nashelper.py --showSNAP <snap name>

    to show share(s) info:
    ./unity_nashelper.py --showSHARE <share name>

    to show filesystem of a NAS server:
    ./unity_nashelper.py --showNASFS NASserverName

    to show a single NAS server share(s) info:
    ./unity_nashelper.py --showNASSHARE <share name>

    add --debug switch to see verbose output
